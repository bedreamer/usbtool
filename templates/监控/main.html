<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>监控</title>
    {% include "base-head.html" %}
    <script src="/static/js/raphael-2.1.4.min.js"></script>
    <script src="/static/js/justgage-1.0.1.js"></script>
    <script>
        var p1 = null;
        var p2 = null;
        var f1 = null;
        $(document).ready(function () {
            p1 = new JustGage({
                id: "gauge1",
                value: 67,
                min: 0,
                max: 100,
                label: "bar",
                title: "出液压力(P1)"
            });
            p2 = new JustGage({
                id: "gauge2",
                value: 99,
                min: 0,
                max: 100,
                label: "bar",
                title: "回液压力(P2)"
            });
            f1 = new JustGage({
                id: "gauge3",
                value: 67,
                min: 0,
                max: 100,
                label: "L/min",
                title: "出口流量(F1)"
            });
            f1.refresh(10);

            function update() {
                $.getJSON("/json/monitor/1/", '', function (data, status, xhr) {
                    p1.refresh(data.p1);
                    p2.refresh(data.p2);
                    f1.refresh(data.f1);
                    $("#id_T1").html(data.t1 + " ℃");
                    $("#id_T1").attr("aria-valuenow", data.t1);

                    $("#id_T2").html(data.t2 + " ℃");
                    $("#id_T2").attr("aria-valuenow", data.t2);

                    $("#id_T3").html(data.t3 + " ℃");
                    $("#id_T3").attr("aria-valuenow", data.t3);

                    $("#id_modbus_tx_count").html(data.modbus_tx_count);
                    $("#id_modbus_rx_count").html(data.modbus_rx_count);
                });
            }
            setInterval(update, 3000);
        });
    </script>
</head>
<body>
    {% include "base-navbar.html" %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-offset-1 col-xs-10">
                <h3>监控</h3>
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-offset-1 col-xs-10">
                <div class="row">
                    <div class="col-xs-2 text-center">加热</div>
                    <div class="col-xs-2 text-center">制冷</div>
                    <div class="col-xs-2 text-center">泵</div>
                    <div class="col-xs-2 text-center">运行</div>
                    <div class="col-xs-2 text-center">内循环</div>
                    <div class="col-xs-2 text-center">外循环</div>
                </div>

                <div class="row">
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash"></span></div>
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash"></span></div>
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash"></span></div>
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash"></span></div>
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash text-success"></span></div>
                    <div class="col-xs-2 text-center"><span class="status-icon glyphicon glyphicon-flash"></span></div>
                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <hr>
                    </div>
                </div>

                <div class="row">

                    <!--1/3-->
                    <div class="col-xs-4">
                        <div class="row">
                            <div class="col-xs-12">
                                <span class="help-block">出液温度(T1):</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="progress">
                                  <div class="progress-bar progress-bar-success" role="progressbar" id="id_T1" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                      10 ℃
                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="gauge1" class="200x160px"></div>
                            </div>
                        </div>
                    </div><!--1/3-->


                    <div class="col-xs-4">
                        <div class="row">
                            <div class="col-xs-12">
                                <span class="help-block">回液温度(T2):</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="progress">
                                  <div class="progress-bar progress-bar-success" role="progressbar" id="id_T2" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                      10 ℃
                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="gauge2" class="200x160px"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-4">
                        <div class="row">
                            <div class="col-xs-12">
                                <span class="help-block">负载温度(T3):</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="progress">
                                  <div class="progress-bar progress-bar-success" role="progressbar" id="id_T3" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                      10 ℃
                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="gauge3" class="100x80px"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <script src="/static/js/bootstrap.js"></script>
</body>
</html>